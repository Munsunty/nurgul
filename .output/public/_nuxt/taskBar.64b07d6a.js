import C from"./taskRelationLine.c8720a4a.js";import{a as X,j as x,r as v,o as u,l as _,h,u as c,t as S,F as y,S as I,c as E,T,p as W,q as z}from"./entry.cee4e10b.js";const A=r=>(W("data-v-57457192"),r=r(),z(),r),M=["width"],R=["x"],V=["x"],j=A(()=>h("div",{style:{height:"33px",opacity:"0"}},"style",-1)),F={__name:"taskBar",props:["taskD","taskList","bWidth","startViewDate"],setup(r){const s=r,g=x({get:()=>t.duration*s.bWidth-18}),p=x({get:()=>-s.startViewDate*s.bWidth}),D=v({width:"inherit",height:"inherit","z-index":1e3,position:"absolute"}),t=s.taskD.data,a=v(0),k=v(0),L=(e,o)=>{if(!t.selected){document.onmouseup=null,e.target.onmousedown=null;let n=document.getElementsByClassName("selected");n.length>0&&n[0].classList.remove("selected"),o.taskList.tasks.filter(l=>l.selected).forEach(l=>{l.selected=!1}),t.selected=!0,e.target.classList.add("selected"),e.target.onmousedown=d}function m(n,l){n+t.date<1?t.dependency instanceof Array&&o.taskList.calculatorCoordT(t):(o.taskList.changeDateTask(t,n+t.date),l.remove())}function d(){let n=event.clientX,l=a.value,w=e.target.getBoundingClientRect().x;e.path[2].style.left=w+"px";function B(i){Math.abs(i-n-a.value)>1&&(a.value=i-n,k.value=w+a.value,e.path[2].style.left=k.value+"px",o.taskList.moveCoord(t,a.value))}function b(i){B(i.pageX)}document.onmousemove=b,document.onmouseup=()=>{document.onmousemove=null;let i=a.value-l,f=parseInt((i>0?i+9:i-41)/s.bWidth);e.path[2].style.left="",(f>0||f<0)&&m(f,e.target),a.value=l,o.taskList.reArrangeCoord(t),t.selected=!1,document.onmouseup=null}}};return(e,o)=>{const m=C;return u(),_(y,null,[h("div",{style:T(c(D))},[(u(),_("svg",{version:"1.1",baseProfile:"full",width:c(g),height:"30",xmlns:"http://www.w3.org/2000/svg",style:{overflow:"visible"}},[h("rect",{x:c(p),width:"100%",height:"100%",fill:"red",onClick:o[0]||(o[0]=d=>L(d,this))},null,8,R),h("text",{x:c(p)+20,y:"18","font-size":"10","text-anchor":"middle",fill:"white",class:"stop-dragging"},S(s.taskD.data.name),9,V),(u(!0),_(y,null,I(s.taskD.data.dependency,d=>(u(),E(m,{width:c(g),taskD:s.taskD.data,next:d,rectX:c(a),start:c(p)},null,8,["width","taskD","next","rectX","start"]))),256))],8,M))],4),j],64)}}},q=X(F,[["__scopeId","data-v-57457192"]]);export{q as default};
